@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{ var culture = HttpContextAccessor.HttpContext?.Session.GetString("Culture"); }

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="app, responsive, jquery, bootstrap, dashboard, admin">
    <title>@ViewBag.Title</title>
    <!-- =============== VENDOR STYLES ===============-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/css/intlTelInput.css" />
    <!-- FONT AWESOME-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/font-awesome/css/font-awesome.css">
    <!-- SIMPLE LINE ICONS-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/simple-line-icons/css/simple-line-icons.css">
    <!-- ANIMATE.CSS-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/animate.css/animate.css">
    <!-- WHIRL (spinners)-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/whirl/dist/whirl.css">
    <!-- =============== PAGE VENDOR STYLES ===============-->
    <!-- Datatables-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/datatables.net-bs4/css/dataTables.bootstrap4.css">
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/datatables.net-keytable-bs/css/keyTable.bootstrap.css">
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/datatables.net-responsive-bs/css/responsive.bootstrap.css">
    <!-- =============== BOOTSTRAP STYLES ===============-->
    <link rel="stylesheet" href="~/wwwroot/Template/css/bootstrap.css" id="bscss">
    <!-- =============== APP STYLES ===============-->
    <link rel="stylesheet" href="~/wwwroot/Template/css/app.css" id="maincss">
    <!-- Bootgrid-->
    <link rel="stylesheet" href="~/wwwroot/Template/vendor/jquery-bootgrid/dist/jquery.bootgrid.css">
    <!-- Icons-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.2/font/bootstrap-icons.min.css" />
    <!-- Themes-->
    <link rel="stylesheet" href="~/wwwroot/js/Theme/dark-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shepherd.js/8.0.1/css/shepherd.css">
    <!-- Data Tables-->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.6/css/jquery.dataTables.min.css" rel="stylesheet" />
</head>
<body>
    <div class="wrapper">
        <!-- top navbar-->
        <header class="topnavbar-wrapper" id="step10">
            <!-- START Top Navbar-->
            <nav class="navbar topnavbar">
                <!-- START navbar header-->
                <div class="navbar-header">
                    <a class="navbar-brand" href="#/">
                        <div class="brand-logo">
                            @{
                                string logo = string.Empty;
                                if (string.IsNullOrEmpty(HttpContextAccessor.HttpContext?.Session.GetString("CLogo")))
                                {
                                    logo = "~/wwwroot/CompanyLogo/erp-logo.png";
                                }
                                else
                                {
                                    logo = HttpContextAccessor.HttpContext?.Session.GetString("CLogo") ?? "~/CompanyLogo/erp-logo.png";
                                }
                            }
                            <img class="img-fluid" src="@Url.Content(logo)" alt="App Logo" width="30" height="30">
                        </div>
                        <div class="brand-logo-collapsed">
                            <img class="img-fluid" src="@Url.Content(logo)" alt="App Logo" width="30" height="30">
                        </div>
                    </a>
                </div>
                <!-- END navbar header-->
                <!-- START Left navbar-->
                <ul class="navbar-nav mr-auto flex-row">
                    <li class="nav-item" id="step1">
                        <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops-->
                        <a class="nav-link d-none d-md-block d-lg-block d-xl-block" href="#" data-trigger-resize="" data-toggle-state="aside-collapsed">
                            <em class="fa fa-navicon"></em>
                        </a>
                        <!-- Button to show/hide the sidebar on mobile. Visible on mobile only.-->
                        <a class="nav-link sidebar-toggle d-md-none" href="#" data-toggle-state="aside-toggled" data-no-persist="true">
                            <em class="fa fa-navicon"></em>
                        </a>
                    </li>
                    <!-- START User avatar toggle-->
                    <li class="nav-item" id="step2">
                        <!-- Button used to collapse the left sidebar. Only visible on tablet and desktops-->
                        <a class="nav-link" id="user-block-toggle" href="#user-block" data-toggle="collapse">
                            <em class="icon-user"></em>
                        </a>
                    </li>
                    <!-- END User avatar toggle-->
                    <!-- START lock screen-->
                    <li class="nav-item" id="step3">
                        <a class="nav-link" href="@Url.Action("Logout", "Home")" title="Lock screen">
                            <em class="icon-lock"></em>
                        </a>
                    </li>
                    <!-- END lock screen-->
                </ul>
                <!-- END Left navbar-->
                <!-- START Right Navbar-->
                <ul class="navbar-nav flex-row">
                    <!-- START Loading-->
                    <li class="nav-item">
                        <div style="display:none;">
                            <img src="~/wwwroot/Template/img/loading.gif" alt="Loading..." />
                        </div>
                    </li>
                    <!-- END Loading-->
                    <!-- START Dark theme-->
                    <li class="nav-item" id="step4">
                        <div class="nav-link container">
                            <i class="fas fa-moon"></i>
                        </div>
                    </li>
                    <!-- END Dark theme-->
                    <!-- START Fullscreen Mode-->
                    <li class="nav-item" id="step5">
                        <div class="nav-link container">
                            <i class="bi bi-fullscreen" id="fullscreenButton"></i>
                        </div>
                    </li>
                    <!-- END Fullscreen Mode-->
                    <!-- START Language list -->
                    <li class="nav-item dropdown" id="step6">
                        <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-globe"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="languageDropdown">
                            @using (Html.BeginForm("SetCulture", "Home", FormMethod.Post, new { @id = "languageForm" }))
                            {
                                <div class="dropdown-item">
                                    <select name="culture" class="custom-select" onchange="document.getElementById('languageForm').submit()">
                                        <option value="en-US" selected="@(culture == "en-US")">English</option>
                                        <option value="ru-RU" selected="@(culture == "ru-RU")">Русский</option>
                                        <option value="uk-UA" selected="@(culture == "uk-UA")">Українська</option>
                                    </select>
                                </div>
                            }
                        </div>
                    </li>
                    <!-- START Currency Dropdown -->
                    <li class="nav-item dropdown" id="step7">
                        <a class="nav-link dropdown-toggle" href="#" id="currencyDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa-solid fa-dollar-sign"></i>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="currencyDropdown">
                            @using (Html.BeginForm("SetCurrency", "Currency", FormMethod.Post, new { @id = "currencyForm" }))
                            {
                                <div class="dropdown-item">
                                    <select id="currencySelect" class="custom-select" onchange="document.getElementById('currencyForm').submit()">
                                        @if (ViewBag.Currencies != null)
                                        {
                                            var selectedCurrency = HttpContextAccessor.HttpContext?.Session.GetString("SelectedCurrency");

                                            foreach (var currency in (List<Dictionary<string, string>>)ViewBag.Currencies)
                                            {
                                                bool isSelected = currency["Code"] == selectedCurrency;

                                                <option value="@currency["Code"]" selected="@(isSelected)">
                                                    @currency["Name"] (@currency["Rate"])
                                                </option>
                                            }
                                        }
                                    </select>
                                </div>
                            }
                        </div>
                    </li>
                    <!-- END Currency Dropdown -->
                    <!-- END Language list -->
                    <li class="nav-item" id="step8">
                        <div class="nav-link container">
                            <i class="bi bi-person-walking" onclick="startTour()"></i>
                        </div>
                    </li>
                </ul>
                <!-- END Right Navbar-->
            </nav>
            <!-- END Top Navbar-->
        </header>
        <!-- sidebar-->
        <aside class="aside-container" id="step9">
            <!-- START Sidebar (left)-->
            <div class="aside-inner">
                <nav class="sidebar" data-sidebar-anyclick-close="">
                    <!-- START sidebar nav-->
                    <ul class="sidebar-nav">
                        <!-- START user info-->
                        <li class="has-user-block">
                            <div class="collapse" id="user-block">
                                <div class="item user-block">
                                    <!-- User picture-->
                                    <div class="user-block-picture">
                                        <div class="user-block-status">
                                            @{
                                                string userImg = string.Empty;
                                                if (string.IsNullOrEmpty(HttpContextAccessor.HttpContext?.Session.GetString("EPhoto")))
                                                {
                                                    userImg = "~/wwwroot/Template/img/user-default-img.png";
                                                }
                                                else
                                                {
                                                    userImg = HttpContextAccessor.HttpContext.Session.GetString("EPhoto") ?? "";
                                                }
                                            }
                                            <img class="img-thumbnail rounded-circle" src="@Url.Content(userImg)" alt="Avatar" width="60" height="60">
                                            <div class="circle bg-success circle-lg"></div>
                                        </div>
                                    </div>
                                    <!-- Name and Job-->
                                    <div class="user-block-info">
                                        <span class="user-block-name">@Localization.CloudERP.Miscellaneous.Hello @HttpContextAccessor.HttpContext?.Session.GetString("UserName")</span>
                                        <span class="user-block-role">@HttpContextAccessor.HttpContext?.Session.GetString("Designation")</span>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <!-- END user info-->
                        @{
                            if (HttpContextAccessor.HttpContext?.Session.GetInt32("UserTypeID") != null)
                            {
                                var userType = HttpContextAccessor.HttpContext?.Session.GetInt32("UserTypeID");
                                if (HttpContextAccessor.HttpContext?.Session.GetInt32("BranchTypeID") != null)
                                {
                                    <!-- Iterates over all sidebar items-->

                                    @*Configuration*@
                                    @*Admin*@
                                    if (userType == 1)
                                    {
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Guide</span>
                                        </li>

                                        <li>
                                            <a href="@Url.Action("AdminMenuGuide", "Guide")" title="@Localization.CloudERP.Miscellaneous.AdminGuide">
                                                <em class="bi bi-info-circle"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AdminGuide)</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Task")" title="@Localization.CloudERP.Miscellaneous.TasksList">
                                                <em class="bi bi-list-task"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.TasksList)</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Analytics")" title="Analytics">
                                                <em class="bi bi-graph-up-arrow"></em>
                                                <span class="align-middle">Analytics</span>
                                            </a>
                                        </li>

                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.UserSetting</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "UserType")" title="@Localization.CloudERP.Miscellaneous.UserTypes">
                                                <em class="bi bi-person-fill-gear"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.UserTypes)</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "User")" title="@Localization.CloudERP.Miscellaneous.Users">
                                                <em class="bi bi-person-fill"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Users)</span>
                                            </a>
                                        </li>
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Companies</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Company")" title="@Localization.CloudERP.Miscellaneous.Company">
                                                <em class="bi bi-building"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Company))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("RegistrationForm", "CompanyRegistration")" title="@Localization.CloudERP.Miscellaneous.CompanyRegistration">
                                                <em class="bi bi-building-add"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.CompanyRegistration))</span>
                                            </a>
                                        </li>
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Branchs</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "BranchType")" title="Branch Types">
                                                <em class="bi bi-bezier2"></em>
                                                <span class="align-middle">Branch Types</span>
                                            </a>
                                        </li>
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">Main Account Settings</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "AccountHead")" title="@Localization.CloudERP.Miscellaneous.AccountHeads">
                                                <em class="bi bi-lightbulb-fill mb-2"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AccountHeads))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "AccountActivity")" title="Account Activities">
                                                <em class="bi bi-universal-access-circle mb-2"></em>
                                                <span class="align-middle">Account Activities</span>
                                            </a>
                                        </li>
                                    }
                                    @*User*@
                                    if (userType == 2)
                                    {
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.HEADER">@Localization.CloudERP.Miscellaneous.Home</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Home")" title="@Localization.CloudERP.Miscellaneous.DashboardTitle">
                                                <em class="bi bi-speedometer2 h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.DashboardTitle))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Forecasting")" title="@Localization.CloudERP.Miscellaneous.Forecasting">
                                                <em class="bi bi-clipboard-data h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Forecasting))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Task")" title="@Localization.CloudERP.Miscellaneous.TasksList">
                                                <em class="bi bi-list-task h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.TasksList))</span>
                                            </a>
                                        </li>
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.SubBranchs</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Branch")" title="@Localization.CloudERP.Miscellaneous.Branches">
                                                <em class="bi bi-diagram-2 h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Branches))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("SubBranchUser", "User")" title="@Localization.CloudERP.Miscellaneous.Users">
                                                <em class="bi bi-person-fill h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Users))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("BranchesMap", "Branch")" title="Branches Map">
                                                <em class="bi bi-compass h4 mb-0"></em>
                                                <span class="align-middle">Branches Map</span>
                                            </a>
                                        </li>

                                        var branchTypeID = HttpContextAccessor.HttpContext?.Session.GetInt32("BranchTypeID");
                                        @*Main Branch*@
                                        if (branchTypeID == 1)
                                        {
                                            <li>
                                                <a href="@Url.Action("Index", "EmployeeStatistics")" title="@Localization.CloudERP.Miscellaneous.EmployeeStatistics">
                                                    <em class="bi bi-bar-chart-fill h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.EmployeeStatistics))</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("AssignTask", "Task")" title="Tasks Assigment">
                                                    <em class="bi bi bi-person-fill-check h4 mb-0"></em>
                                                    <span class="align-middle">Tasks Assigment</span>
                                                </a>
                                            </li>
                                            <li class="nav-heading ">
                                                <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Guide</span>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("MainBranchEmployeeGuide", "Guide")" title="@Localization.CloudERP.Miscellaneous.MainEmployeeGuide">
                                                    <em class="bi bi-info-circle h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.MainEmployeeGuide))</span>
                                                </a>
                                            </li>
                                            <li class="nav-heading ">
                                                <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Branchs</span>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("Create", "Branch")" title="@Localization.CloudERP.Miscellaneous.NewBranch">
                                                    <em class="bi bi-diagram-2 h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewBranch))</span>
                                                </a>
                                            </li>
                                            <li class="nav-heading ">
                                                <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Employees</span>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("Employees", "CompanyEmployee")" title="@Localization.CloudERP.Miscellaneous.EmployeeRegistration">
                                                    <em class="bi bi-person-add h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.EmployeeRegistration))</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("EmployeeSalary", "CompanyEmployee")" title="@Localization.CloudERP.Miscellaneous.Payroll">
                                                    <em class="bi bi-coin h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Payroll))</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("SalaryHistory", "CompanyEmployee")" title="@Localization.CloudERP.Miscellaneous.PaidSalariesHistory">
                                                    <em class="bi bi-cash-stack h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.PaidSalariesHistory))</span>
                                                </a>
                                            </li>
                                        }
                                        if (branchTypeID > 1)
                                        {
                                            <li class="nav-heading ">
                                                <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Guide</span>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("EmployeeGuide", "Guide")" title="Employee Guide">
                                                    <em class="bi bi-info-circle h4 mb-0"></em>
                                                    <span class="align-middle">Employee Guide</span>
                                                </a>
                                            </li>
                                            <li class="nav-heading ">
                                                <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Employees</span>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("Employee", "BranchEmployee")" title="@Localization.CloudERP.Miscellaneous.EmployeeRegistration">
                                                    <em class="bi bi-person-add h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.EmployeeRegistration))</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("EmployeeSalary", "CompanyEmployee")" title="@Localization.CloudERP.Miscellaneous.Payroll">
                                                    <em class="bi bi-coin h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Payroll))</span>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="@Url.Action("SalaryHistory", "CompanyEmployee")" title="@Localization.CloudERP.Miscellaneous.PaidSalariesHistory">
                                                    <em class="bi bi-cash-stack h4 mb-0"></em>
                                                    <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.PaidSalariesHistory))</span>
                                                </a>
                                            </li>
                                        }
                                        <li class="nav-heading ">
                                            <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Stocks</span>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Category")" title="@Localization.CloudERP.Miscellaneous.StockCategories">
                                                <em class="bi bi-inboxes-fill h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.StockCategories))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("Index", "Stock")" title="@Localization.CloudERP.Miscellaneous.StockDetails">
                                                <em class="bi bi-boxes h4 mb-0"></em>
                                                <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.StockDetails))</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="@Url.Action("ProductQuality", "Stock")" title="Product Quality">
                                                <em class="bi bi-battery-half h4 mb-0"></em>
                                                <span class="align-middle">Product Quality</span>
                                            </a>
                                        </li>
                                    }
                                    <li class="nav-heading ">
                                        <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.AccountSettings</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "AccountControl")" title="@Localization.CloudERP.Miscellaneous.AccountControls">
                                            <em class="bi bi-gear-wide h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AccountControls))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "AccountSubControl")" title="@Localization.CloudERP.Miscellaneous.AccountSubControls">
                                            <em class="bi bi-gear-wide-connected h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AccountSubControls))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "AccountSetting")" title="@Localization.CloudERP.Miscellaneous.AccountFlow">
                                            <em class="bi bi-person-lines-fill h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AccountFlow))</span>
                                        </a>
                                    </li>
                                }

                                if (userType == 1)
                                {
                                    <li class="nav-heading ">
                                        <span>@Html.Raw(Localization.CloudERP.Miscellaneous.FinancialYear))</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "FinancialYear")" title="@Localization.CloudERP.Miscellaneous.FinancialYear">
                                            <em class="bi bi-cash h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.FinancialYear))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Create", "FinancialYear")" title="@Localization.CloudERP.Miscellaneous.NewFinancialYear">
                                            <em class="bi bi-cash-coin h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewFinancialYear))</span>
                                        </a>
                                    </li>
                                }
                                if (userType == 2)
                                {
                                    <li class="nav-heading ">
                                        <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.FinancialYear</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "FinancialYearView")" title="@Localization.CloudERP.Miscellaneous.AllFinancialYears">
                                            <em class="bi bi-calendar3 h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AllFinancialYears))</span>
                                        </a>
                                    </li>
                                }
                                <li class="nav-heading ">
                                    <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Customers</span>
                                </li>
                                if (userType == 2)
                                {
                                    <li>
                                        <a href="@Url.Action("Create", "Customer")" title="@Localization.CloudERP.Miscellaneous.NewCustomer">
                                            <em class="bi bi-person-fill-add h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewCustomer))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "Customer")" title="@Localization.CloudERP.Miscellaneous.BranchCustomers">
                                            <em class="bi bi-cart h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.BranchCustomers))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("SubBranchCustomer", "Customer")" title="@Localization.CloudERP.Miscellaneous.SubBranchCustomersNavlink">
                                            <em class="bi bi-cart-check h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.SubBranchCustomersNavlink))</span>
                                        </a>
                                    </li>
                                    <li class="nav-heading ">
                                        <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Sales</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("NewSale", "SaleCart")" title="@Localization.CloudERP.Miscellaneous.NewSale">
                                            <em class="bi bi-bag-plus h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewSale))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("RemainingPaymentList", "SalePayment")" title="@Localization.CloudERP.Miscellaneous.SalePendingPayment">
                                            <em class="bi bi-paypal h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.SalePendingPayment))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("CustomSalesHistory", "SalePayment", new { FromDate = DateTime.Now, ToDate = DateTime.Now })" title="@Localization.CloudERP.Miscellaneous.AllSales">
                                            <em class="bi bi-card-checklist h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AllSales))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("FindSale", "SaleReturn")" title="@Localization.CloudERP.Miscellaneous.SaleReturn">
                                            <em class="bi bi-bag-dash h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.SaleReturn))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("AllReturnSalesPendingAmount", "SalePaymentReturn")" title="@Localization.CloudERP.Miscellaneous.ReturnSalesPendingAmount">
                                            <em class="bi bi-wallet-fill h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.ReturnSalesPendingAmount))</span>
                                        </a>
                                    </li>
                                }
                                if (userType == 1)
                                {
                                    <li>
                                        <a href="@Url.Action("AllCustomers", "Customer")" title="@Localization.CloudERP.Miscellaneous.AllCustomers">
                                            <em class="bi bi-cart h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AllCustomers))</span>
                                        </a>
                                    </li>
                                }
                                <li class="nav-heading ">
                                    <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Suppliers</span>
                                </li>
                                if (userType == 2)
                                {
                                    <li>
                                        <a href="@Url.Action("Create", "Supplier")" title="@Localization.CloudERP.Miscellaneous.NewSupplier">
                                            <em class="bi bi-umbrella h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewSupplier))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "Supplier")" title="@Localization.CloudERP.Miscellaneous.BranchSuppliers">
                                            <em class="bi bi-truck h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.BranchSuppliers))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("SubBranchSupplier", "Supplier")" title="@Localization.CloudERP.Miscellaneous.SubBranchSuppliers">
                                            <em class="bi bi-truck-front h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.SubBranchSuppliers))</span>
                                        </a>
                                    </li>
                                    <li class="nav-heading ">
                                        <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Purchases</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("NewPurchase", "PurchaseCart")" title="@Localization.CloudERP.Miscellaneous.NewPurchase">
                                            <em class="bi bi-cart-plus h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.NewPurchase))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("RemainingPaymentList", "PurchasePayment")" title="@Localization.CloudERP.Miscellaneous.PurchasePendingPayment">
                                            <em class="bi bi-currency-dollar h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.PurchasePendingPayment))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("CustomPurchasesHistory", "PurchasePayment", new { FromDate = DateTime.Now, ToDate = DateTime.Now })" title="@Localization.CloudERP.Miscellaneous.AllPurchases">
                                            <em class="bi bi-cart h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AllPurchases))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("FindPurchase", "PurchaseReturn")" title="@Localization.CloudERP.Miscellaneous.PurchasesReturn">
                                            <em class="bi bi-cart-dash h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.PurchasesReturn))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("AllPurchasesPendingPayment", "PurchasePaymentReturn")" title="@Localization.CloudERP.Miscellaneous.ReturnPaymentPending">
                                            <em class="bi bi-currency-dollar h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.ReturnPaymentPending))</span>
                                        </a>
                                    </li>
                                    <li class="nav-heading ">
                                        <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.Transactions</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("GeneralTransaction", "GeneralTransaction", new { transaction = new CloudERP.Models.GeneralTransactionMV() { CreditAccountControlID = 0, DebitAccountControlID = 0, TransferAmount = 0 } })" title="@Localization.CloudERP.Miscellaneous.GeneralTransaction">
                                            <em class="bi bi-briefcase h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.GeneralTransaction))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Journal", "GeneralTransaction")" title="@Localization.CloudERP.Miscellaneous.Journal">
                                            <em class="bi bi-journal-bookmark h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Journal))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("GetLedger", "Ledger")" title="@Localization.CloudERP.Miscellaneous.AccountsLedger">
                                            <em class="bi bi-book-half h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AccountsLedger))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("GetTrialBalance", "TrialBalance")" title="@Localization.CloudERP.Miscellaneous.TrialBalance">
                                            <em class="bi bi-currency-dollar h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.TrialBalance))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("GetIncomeStatement", "IncomeStatement")" title="@Localization.CloudERP.Miscellaneous.IncomeStatement">
                                            <em class="bi bi-currency-exchange h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.IncomeStatement))</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("GetBalanceSheet", "BalanceSheet")" title="@Localization.CloudERP.Miscellaneous.BalanceSheet">
                                            <em class="bi bi-file-earmark-spreadsheet h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.BalanceSheet))</span>
                                        </a>
                                    </li>
                                }
                                if (userType == 1)
                                {
                                    <li>
                                        <a href="@Url.Action("AllSuppliers", "Supplier")" title="@Localization.CloudERP.Miscellaneous.AllSuppliers">
                                            <em class="bi bi-minecart-loaded h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.AllSuppliers))</span>
                                        </a>
                                    </li>
                                }
                                <li class="nav-heading ">
                                    <span data-localize="sidebar.heading.COMPONENTS">@Localization.CloudERP.Miscellaneous.License</span>
                                </li>
                                if (userType == 1)
                                {
                                    <li>
                                        <a href="@Url.Action("AdminList", "Support")" title="@Localization.CloudERP.Miscellaneous.TicketList">
                                            <em class="bi bi-hammer h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.TicketList))</span>
                                        </a>
                                    </li>
                                }
                                if (userType == 2)
                                {
                                    <li>
                                        <a href="@Url.Action("Support", "Support")" title="@Localization.CloudERP.Miscellaneous.Support">
                                            <em class="bi bi-hammer h4 mb-0"></em>
                                            <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.Support))</span>
                                        </a>
                                    </li>
                                }
                                <li>
                                    <a href="@Url.Action("PrivacyPolicy", "Guide")" title="@Localization.CloudERP.Miscellaneous.PrivacyPolicy">
                                        <em class="bi bi-sourceforge h4 mb-0"></em>
                                        <span class="align-middle">@Html.Raw(Localization.CloudERP.Miscellaneous.PrivacyPolicy))</span>
                                    </a>
                                </li>
                            }
                        }
                    </ul>
                    <!-- END sidebar nav-->
                </nav>
            </div>
            <!-- END Sidebar (left)-->
        </aside>
        <!-- Main section-->
        <section class="section-container">
            <!-- Page content-->
            <div class="content-wrapper">
                <div class="content-heading">
                    <div>
                        @ViewBag.Title
                    </div>
                </div>
                <div>
                    @RenderBody()
                </div>
            </div>
        </section>
        <!-- Page footer-->
        <footer class="footer-container">
            <span>&copy; @DateTime.Now.ToString("yyyy") - Kuvaiev Inc</span>
        </footer>
    </div>
    <!-- =============== VENDOR SCRIPTS ===============-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/intlTelInput.min.js"></script>
    <!-- MODERNIZR-->
    <script src="~/wwwroot/Template/vendor/modernizr/modernizr.custom.js"></script>
    <!-- JQUERY-->
    <script src="~/wwwroot/Template/vendor/jquery/dist/jquery.js"></script>
    <!-- BOOTSTRAP-->
    <script src="~/wwwroot/Template/vendor/popper.js/dist/umd/popper.js"></script>
    <script src="~/wwwroot/Template/vendor/bootstrap/dist/js/bootstrap.js"></script>
    <!-- STORAGE API-->
    <script src="~/wwwroot/Template/vendor/js-storage/js.storage.js"></script>
    <!-- JQUERY EASING-->
    <script src="~/wwwroot/Template/vendor/jquery.easing/jquery.easing.js"></script>
    <!-- ANIMO-->
    <script src="~/wwwroot/Template/vendor/animo/animo.js"></script>
    <!-- SCREENFULL-->
    <script src="~/wwwroot/Template/vendor/screenfull/dist/screenfull.js"></script>
    <!-- LOCALIZE-->
    <script src="~/wwwroot/Template/vendor/jquery-localize/dist/jquery.localize.js"></script>
    <!-- =============== PAGE VENDOR SCRIPTS ===============-->
    <!-- Bootgrid-->
    <script src="~/wwwroot/Template/vendor/jquery-bootgrid/dist/jquery.bootgrid.js"></script>
    <script src="~/wwwroot/Template/vendor/jquery-bootgrid/dist/jquery.bootgrid.fa.js"></script>
    <!-- JQUERY VALIDATE-->
    <script src="~/wwwroot/Template/vendor/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/wwwroot/Template/vendor/jquery-validation/dist/additional-methods.js"></script>
    <!-- JQUERY STEPS-->
    <script src="~/wwwroot/Template/vendor/jquery-steps/build/jquery.steps.js"></script>
    <!-- Datatables-->
    <script src="~/wwwroot/Template/vendor/datatables.net/js/jquery.dataTables.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-bs4/js/dataTables.bootstrap4.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons/js/dataTables.buttons.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons-bs/js/buttons.bootstrap.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons/js/buttons.colVis.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons/js/buttons.flash.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons/js/buttons.html5.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-buttons/js/buttons.print.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-keytable/js/dataTables.keyTable.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-responsive/js/dataTables.responsive.js"></script>
    <script src="~/wwwroot/Template/vendor/datatables.net-responsive-bs/js/responsive.bootstrap.js"></script>
    <script src="~/wwwroot/Template/vendor/jszip/dist/jszip.js"></script>
    <script src="~/wwwroot/Template/vendor/pdfmake/build/pdfmake.js"></script>
    <script src="~/wwwroot/Template/vendor/pdfmake/build/vfs_fonts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shepherd.js/8.0.1/js/shepherd.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.6/js/jquery.dataTables.min.js"></script>
    <!-- Themes-->
    <script src="~/wwwroot/js/Theme/theme-switcher.js"></script>
    <!-- =============== APP SCRIPTS ===============-->
    <script src="~/wwwroot/Template/js/app.js"></script>
    <script src="~/wwwroot/js/CustomScripts/FullscreenMode.js"></script>
    <script src="~/wwwroot/js/CustomScripts/Tour.js"></script>
    @{
        bool.TryParse(HttpContextAccessor.HttpContext?.Session.GetString("StartTour"), out bool startTour);
        HttpContextAccessor.HttpContext?.Session.SetString("StartTour", "false");
    }
    <script>
        $(document).ready(function () {
            if (@startTour.ToString().ToLower()) {
                startTour();
            }
        });
    </script>
</body>
</html>